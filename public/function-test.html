<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netlify Function Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        button {
            padding: 10px 15px;
            margin: 10px 5px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .error {
            color: red;
        }
        .success {
            color: green;
        }
    </style>
</head>
<body>
    <h1>Netlify Function Test</h1>
    
    <div>
        <h2>Test Simple Function</h2>
        <button id="testSimpleGet">Test GET</button>
        <button id="testSimplePost">Test POST</button>
        <div id="simpleResult"></div>
    </div>

    <hr>

    <div>
        <h2>Test Support Chat Function</h2>
        <button id="testChatGet">Test GET</button>
        <button id="testChatPost">Test POST with dummy data</button>
        <div id="chatResult"></div>
    </div>

    <script>
        // Helper function to display results
        function displayResult(elementId, response, error = false) {
            const element = document.getElementById(elementId);
            const pre = document.createElement('pre');
            pre.className = error ? 'error' : 'success';
            pre.textContent = typeof response === 'string' 
                ? response 
                : JSON.stringify(response, null, 2);
            
            // Add timestamp
            const timestamp = document.createElement('div');
            timestamp.textContent = new Date().toLocaleTimeString();
            
            element.prepend(pre);
            element.prepend(timestamp);
        }

        // Test the simple function with GET
        document.getElementById('testSimpleGet').addEventListener('click', async () => {
            try {
                const response = await fetch('/.netlify/functions/test-simple');
                const data = await response.json();
                displayResult('simpleResult', data);
            } catch (error) {
                displayResult('simpleResult', `Error: ${error.message}`, true);
            }
        });

        // Test the simple function with POST
        document.getElementById('testSimplePost').addEventListener('click', async () => {
            try {
                const response = await fetch('/.netlify/functions/test-simple', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ test: 'data' })
                });
                const data = await response.json();
                displayResult('simpleResult', data);
            } catch (error) {
                displayResult('simpleResult', `Error: ${error.message}`, true);
            }
        });

        // Test the support-chat function with GET
        document.getElementById('testChatGet').addEventListener('click', async () => {
            try {
                const response = await fetch('/.netlify/functions/support-chat?customerId=test-customer');
                const data = await response.json();
                displayResult('chatResult', data);
            } catch (error) {
                displayResult('chatResult', `Error: ${error.message}`, true);
            }
        });

        // Test the support-chat function with POST
        document.getElementById('testChatPost').addEventListener('click', async () => {
            try {
                const response = await fetch('/.netlify/functions/support-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        customerId: 'test-customer',
                        orderId: 'test-order',
                        issue: 'Test issue',
                        category: 'Test category'
                    })
                });
                const data = await response.json();
                displayResult('chatResult', data);
            } catch (error) {
                displayResult('chatResult', `Error: ${error.message}`, true);
            }
        });
    </script>
</body>
</html>